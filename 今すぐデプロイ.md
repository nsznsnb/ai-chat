# ğŸš€ AI Chat - ä»Šã™ããƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †

ã“ã®ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦ã€AI Chatã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Google Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

## å‰ææ¡ä»¶

- [ ] Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- [ ] Claude API ã‚­ãƒ¼ï¼ˆ[ã“ã¡ã‚‰ã‹ã‚‰å–å¾—](https://console.anthropic.com/)ï¼‰
- [ ] ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆGCPç„¡æ–™æ ã§ã‚‚å¿…è¦ï¼‰

---

## ã‚¹ãƒ†ãƒƒãƒ—1: Google Cloud SDK ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆ

1. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**
   - [Google Cloud SDK](https://cloud.google.com/sdk/docs/install) ã«ã‚¢ã‚¯ã‚»ã‚¹
   - Windowsç”¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ï¼ˆ64ãƒ“ãƒƒãƒˆï¼‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

2. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Ÿè¡Œ**
   - `GoogleCloudSDKInstaller.exe` ã‚’å®Ÿè¡Œ
   - ã™ã¹ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§OK
   - **é‡è¦**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€PowerShellã‚’å†èµ·å‹•

3. **ç¢ºèª**
   ```powershell
   gcloud --version
   ```
   ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OK

---

## ã‚¹ãƒ†ãƒƒãƒ—2: Claude API ã‚­ãƒ¼ã‚’æº–å‚™

1. [Anthropic Console](https://console.anthropic.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. API Keys ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ–°ã—ã„ã‚­ãƒ¼ã‚’ä½œæˆ
3. ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆ`sk-ant-api03-` ã§å§‹ã¾ã‚‹å½¢å¼ï¼‰

---

## ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

### PowerShellã‚’ç®¡ç†è€…ã¨ã—ã¦é–‹ã

1. ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã€ŒPowerShellã€ã‚’æ¤œç´¢
2. å³ã‚¯ãƒªãƒƒã‚¯â†’ã€Œç®¡ç†è€…ã¨ã—ã¦å®Ÿè¡Œã€

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•

```powershell
cd c:\Users\ninis\Desktop\claude-practice\ai-chat
```

### ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ

**é‡è¦**: `your-actual-api-key` ã‚’å®Ÿéš›ã®Claude API ã‚­ãƒ¼ã«ç½®ãæ›ãˆã¦ãã ã•ã„

```powershell
.\full-deploy.ps1 -ApiKey "sk-ant-api03-your-actual-api-key"
```

### å®Ÿè¡Œä¾‹

```powershell
.\full-deploy.ps1 -ApiKey "sk-ant-api03-abcdefghijklmnopqrstuvwxyz1234567890"
```

---

## ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ã‚»ã‚¹

ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä»¥ä¸‹ã®å‡¦ç†ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ï¼š

1. âœ… gcloud CLI ã®ç¢ºèª
2. âœ… GCPèªè¨¼ï¼ˆåˆå›ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã§èªè¨¼ï¼‰
3. âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã¨APIæœ‰åŠ¹åŒ–
4. âœ… Secret Managerã«APIã‚­ãƒ¼ã‚’ä¿å­˜
5. âœ… ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«æ¨©é™ä»˜ä¸
6. âœ… Artifact Registryãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
7. âœ… Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ï¼ˆ3ã€œ5åˆ†ï¼‰
8. âœ… Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤

**æ‰€è¦æ™‚é–“**: åˆå› ç´„10ã€œ15åˆ†

---

## ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†

ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæˆåŠŸã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
========================================
ğŸ‰ ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼
========================================

ã‚µãƒ¼ãƒ“ã‚¹URL: https://ai-chat-xxxxxxxxxx-an.a.run.app

æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:
  1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹:
     https://ai-chat-xxxxxxxxxx-an.a.run.app

  2. ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ

  3. ãƒ­ã‚°ã‚’ç¢ºèª:
     gcloud logging tail "resource.type=cloud_run_revision AND resource.labels.service_name=ai-chat"

ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼ ğŸš€
```

---

## ã‚¹ãƒ†ãƒƒãƒ—6: å‹•ä½œç¢ºèª

### ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹

è¡¨ç¤ºã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¾ã™ã€‚

### ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ

1. ãƒãƒ£ãƒƒãƒˆç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦é€ä¿¡
3. AIã‹ã‚‰ã®å¿œç­”ã‚’ç¢ºèª

---

## ğŸ”„ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã™ã‚‹æ–¹æ³•

ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãŸå¾Œã€å†ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆï¼š

### æ–¹æ³•1: æ—¢å­˜ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨

```powershell
.\deploy.ps1
```

### æ–¹æ³•2: ãƒ•ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨

```powershell
.\full-deploy.ps1 -ApiKey "your-api-key"
```

---

## ğŸ“Š ã‚³ã‚¹ãƒˆç®¡ç†

### äºˆæƒ³ã‚³ã‚¹ãƒˆ

- **æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°0**: ä½¿ç”¨ã—ã¦ã„ãªã„æ™‚ã¯èª²é‡‘ãªã—
- **ç„¡æ–™æ **: æœˆé–“200ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§ç„¡æ–™
- **å°è¦æ¨¡åˆ©ç”¨**: æœˆé¡ $0ã€œ$10ç¨‹åº¦

### ã‚³ã‚¹ãƒˆç¢ºèª

[GCP Console](https://console.cloud.google.com/) > ãŠæ”¯æ‰•ã„ > ãƒ¬ãƒãƒ¼ãƒˆ

---

## â“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q: gcloud: command not found

**A**: PowerShellã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚ãã‚Œã§ã‚‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã¯ã€Google Cloud SDKã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

### Q: èªè¨¼ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

**A**: ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„
```powershell
gcloud auth login
```

### Q: ãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã™ã‚‹

**A**: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰ã‚’ç¢ºèª
```powershell
npm install
npm run build
```

### Q: ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«ã‚¢ãƒ—ãƒªãŒå‹•ã‹ãªã„

**A**: ãƒ­ã‚°ã‚’ç¢ºèª
```powershell
gcloud logging tail "resource.type=cloud_run_revision AND resource.labels.service_name=ai-chat"
```

### Q: Secret Managerã®ã‚¨ãƒ©ãƒ¼

**A**: APIã‚­ãƒ¼ã‚’ç¢ºèª
```powershell
gcloud secrets versions access latest --secret=anthropic-api-key
```

---

## ğŸ›‘ ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã™ã‚‹æ–¹æ³•

### ä¸€æ™‚åœæ­¢ï¼ˆãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’0ã«ï¼‰

```powershell
gcloud run services update ai-chat --region asia-northeast1 --min-instances 0 --max-instances 0
```

### å®Œå…¨å‰Šé™¤

```powershell
gcloud run services delete ai-chat --region asia-northeast1
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

1. **[ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œæ‰‹é †.md](ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œæ‰‹é †.md)** - ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
2. **[SETUP_DEPLOY.md](SETUP_DEPLOY.md)** - å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼ˆè©³ç´°ç‰ˆï¼‰
3. **[DEPLOY_GUIDE.md](DEPLOY_GUIDE.md)** - æŠ€è¡“è€…å‘ã‘è©³ç´°ã‚¬ã‚¤ãƒ‰

---

## ğŸ“ ã¾ã¨ã‚

### ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¿…è¦ãªã“ã¨

1. Google Cloud SDK ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. Claude API ã‚­ãƒ¼ã‚’å–å¾—
3. ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œï¼š

```powershell
cd c:\Users\ninis\Desktop\claude-practice\ai-chat
.\full-deploy.ps1 -ApiKey "sk-ant-api03-your-actual-api-key"
```

ãŸã£ãŸã“ã‚Œã ã‘ã§ã€æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼

---

**ä½œæˆæ—¥**: 2025-12-07
**æ‰€è¦æ™‚é–“**: åˆå› 10ã€œ15åˆ†ã€2å›ç›®ä»¥é™ 5åˆ†
**ã‚³ã‚¹ãƒˆ**: æœˆé¡ $0ã€œ$10ï¼ˆå°è¦æ¨¡åˆ©ç”¨ï¼‰
